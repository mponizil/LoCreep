{% extends "base.html" %}

{% block content %}

<script src="http://localhost:3000/socket.io/socket.io.js"></script>
<script type="text/javascript">
var socket = io.connect('http://localhost:3000/chat');
socket.emit('init', { conversation_id: 1 })
socket.on('message', function(data) {
  // add message to the page
  console.log(data)
})

$("#send_message").submit(function() {
  var body = $("input[name='message']").val();
  $.post("/user_message", { conversation_id: 1, body: body })
})
</script>

<form id="send_message">
  <input type="text" name="message" />
  <input type="submit" name="submit" value="send" />
</form>

{% endblock %}